<template>
  <InspectorLimit
    v-if="showFreeModal"
    @cancel="showFreeModal = false"
  />
  <InspectorModalBox
    v-model="showInspector"
    button="warning"
    has-button
    has-cancel
    button-label="Delete"
  />
  <aside
    id="aside"
    style="overflow-x:hidden; scrollbar-width: none;"
    class="w-[292px] fixed top-0 h-screen transition-position bg-[#f4f5f7] font-SfProDisplayNormal text-sm xl:left-0 z-30"
    :class="isAsideMobileExpanded ? 'left-0' : '-left-full'"
  >
    <div class="px-[16px] pt-[15px]">
      <AsideMenuListItem
        class="mb-[16px]"
        :selected="isPathSelected('account')"
        :title="user?.current_user_name"
        @click="changeTab('account')"
      >
        <img
          class="rounded-[8px] h-[30px] w-[30px] border-2 border-white"
          :src="user?.foto_link"
        >
      </AsideMenuListItem>
      <router-link to="/doitnow">
        <AsideMenuListItem
          :selected="isPathSelected('doitnow')"
          title="Очередь"
          @click="selectTab('doitnow')"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M5 6.89471C5 6.65742 5.08975 6.42985 5.2495 6.26206C5.40925 6.09426 5.62593 6 5.85185 6H22.5926C22.8185 6 23.0352 6.09426 23.1949 6.26206C23.3547 6.42985 23.4444 6.65742 23.4444 6.89471C23.4444 7.13201 23.3547 7.35958 23.1949 7.52737C23.0352 7.69517 22.8185 7.78943 22.5926 7.78943H5.85185C5.62593 7.78943 5.40925 7.69517 5.2495 7.52737C5.08975 7.35958 5 7.13201 5 6.89471ZM14.0741 13.1577H5.85185C5.62593 13.1577 5.40925 13.252 5.2495 13.4198C5.08975 13.5876 5 13.8151 5 14.0524C5 14.2897 5.08975 14.5173 5.2495 14.6851C5.40925 14.8529 5.62593 14.9471 5.85185 14.9471H14.0741C14.3 14.9471 14.5167 14.8529 14.6764 14.6851C14.8362 14.5173 14.9259 14.2897 14.9259 14.0524C14.9259 13.8151 14.8362 13.5876 14.6764 13.4198C14.5167 13.252 14.3 13.1577 14.0741 13.1577ZM14.0741 20.3154H5.85185C5.62593 20.3154 5.40925 20.4097 5.2495 20.5775C5.08975 20.7453 5 20.9729 5 21.2102C5 21.4474 5.08975 21.675 5.2495 21.8428C5.40925 22.0106 5.62593 22.1049 5.85185 22.1049H14.0741C14.3 22.1049 14.5167 22.0106 14.6764 21.8428C14.8362 21.675 14.9259 21.4474 14.9259 21.2102C14.9259 20.9729 14.8362 20.7453 14.6764 20.5775C14.5167 20.4097 14.3 20.3154 14.0741 20.3154ZM26 17.6313C26.0009 17.784 25.964 17.9343 25.8931 18.0676C25.8222 18.2009 25.7196 18.3126 25.5954 18.3918L18.7805 22.8654C18.6517 22.9494 18.5038 22.9958 18.3522 22.9997C18.2006 23.0037 18.0507 22.965 17.918 22.8877C17.7862 22.8091 17.6764 22.6953 17.5997 22.5578C17.5231 22.4204 17.4823 22.2642 17.4815 22.1049V13.1577C17.4816 12.9985 17.5222 12.8423 17.5991 12.7051C17.6759 12.5679 17.7862 12.4547 17.9186 12.3772C18.051 12.2997 18.2006 12.2607 18.3522 12.2642C18.5037 12.2677 18.6516 12.3136 18.7805 12.3972L25.5954 16.8708C25.7196 16.95 25.8222 17.0617 25.8931 17.195C25.964 17.3283 26.0009 17.4786 26 17.6313ZM23.5403 17.6313L19.1852 14.7682V20.4944L23.5403 17.6313Z"
              fill="currentColor"
            />
          </svg>
        </AsideMenuListItem>
      </router-link>
      <AsideMenuListItem
        :selected="isPathSelected('tasks')"
        title="Задачи"
        @click="changeTab('tasks')"
      >
        <svg
          width="30"
          height="30"
          viewBox="0 0 30 30"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M6.44542 5.83331H12.8532C13.1941 5.83331 13.4651 6.10431 13.4651 6.44524V12.853C13.4651 13.1939 13.1941 13.4649 12.8532 13.4649H6.44542C6.10449 13.4649 5.8335 13.1939 5.8335 12.853V6.44524C5.8335 6.10431 6.10449 5.83331 6.44542 5.83331ZM7.34583 7.34565V11.9526H11.9528V7.34565H7.34583ZM6.44542 16.035H12.8532C13.1941 16.035 13.4651 16.306 13.4651 16.647V23.0547C13.4651 23.3957 13.1941 23.6667 12.8532 23.6667H6.44542C6.10449 23.6667 5.8335 23.3957 5.8335 23.0547V16.647C5.8335 16.306 6.10449 16.035 6.44542 16.035ZM7.34583 17.5474V22.1543H11.9528V17.5474H7.34583ZM20.6071 16.035H19.0948V19.0947H16.0352V20.607H19.0948V23.6667H20.6071V20.607H23.6668V19.0947H20.6071V16.035ZM16.6471 5.83331H23.0548C23.3958 5.83331 23.6668 6.10431 23.6668 6.44524V12.853C23.6668 13.1939 23.3958 13.4649 23.0548 13.4649H16.6471C16.3062 13.4649 16.0352 13.1939 16.0352 12.853V6.44524C16.0352 6.10431 16.3062 5.83331 16.6471 5.83331ZM17.5475 7.34565V11.9526H22.1544V7.34565H17.5475Z"
            fill="currentColor"
          />
        </svg>
      </AsideMenuListItem>
      <router-link
        to="/reglaments"
      >
        <AsideMenuListItem
          :selected="isPathSelected('reglaments')"
          title="Регламенты"
          @click="selectTab('reglaments')"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M26.2803 18.4697L24.0303 16.2197C23.8896 16.0791 23.6989 16.0002 23.5 16.0002C23.3011 16.0002 23.1104 16.0791 22.9697 16.2197L16 23.1895V26.5H19.3105L26.2803 19.5303C26.4209 19.3896 26.4998 19.1989 26.4998 19C26.4998 18.8011 26.4209 18.6104 26.2803 18.4697ZM18.6895 25H17.5V23.8105L21.25 20.0605L22.4395 21.25L18.6895 25ZM23.5 20.1895L22.3105 19L23.5 17.8105L24.6895 19L23.5 20.1895ZM10 16H17.5V17.5H10V16ZM10 11.5H19V13H10V11.5Z"
              fill="currentColor"
            />
            <path
              d="M23.5 7C23.4996 6.6023 23.3414 6.221 23.0602 5.93978C22.779 5.65856 22.3977 5.5004 22 5.5H7.00001C6.6023 5.5004 6.221 5.65856 5.93978 5.93978C5.65856 6.221 5.5004 6.6023 5.50001 7V16.75C5.49833 18.2458 5.90404 19.7137 6.67359 20.9964C7.44313 22.279 8.54745 23.3278 9.868 24.0302L13.75 26.1002V24.4L10.5745 22.7065C9.49402 22.1318 8.59042 21.2737 7.96069 20.2243C7.33095 19.1749 6.99884 17.9738 7.00001 16.75V7H22V13.75H23.5V7Z"
              fill="currentColor"
            />
          </svg>
        </AsideMenuListItem>
      </router-link>
      <AsideMenuListItem
        :selected="isPathSelected('project')"
        title="Проекты"
        @click="changeTab('project')"
      >
        <svg
          width="30"
          height="30"
          viewBox="0 0 30 30"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M23.3813 9.4868V8.39736C23.3813 7.3868 22.5646 6.56356 21.562 6.56356H14.0645L13.8396 6.18891C13.7026 5.97201 13.463 5.83398 13.2087 5.83398H7.65284C6.65024 5.83398 5.8335 6.65722 5.8335 7.66779V21.5002C5.8335 22.5107 6.65024 23.334 7.65284 23.334H23.1808C24.1834 23.334 25.0001 22.5107 25.0001 21.5002V11.3107C25.005 10.3643 24.291 9.58539 23.3813 9.4868ZM7.31049 7.66779C7.31049 7.47553 7.46699 7.31779 7.65773 7.31779H12.7978L14.7933 10.6009C14.9253 10.8178 15.1649 10.9558 15.4242 10.9558H23.1906C23.3813 10.9558 23.5378 11.1136 23.5378 11.3058V21.5002C23.5378 21.6924 23.3813 21.8502 23.1906 21.8502H7.65284C7.4621 21.8502 7.3056 21.6924 7.3056 21.5002V7.66779H7.31049ZM21.9043 9.47201H15.8301L14.9644 8.04736H21.5571C21.7478 8.04736 21.9043 8.20511 21.9043 8.39736V9.47201Z"
            fill="currentColor"
          />
        </svg>
      </AsideMenuListItem>
      <AsideMenuListItem
        :selected="isPathSelected('board')"
        title="Доски"
        @click="changeTab('board')"
      >
        <svg
          width="30"
          height="30"
          viewBox="0 0 30 30"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M6.5 24.9694C5.67347 24.9694 5 24.3061 5 23.4898V8.85714C5 8.04082 5.67347 7.37755 6.5 7.37755H10.102V6.32653C10.102 5.96939 10.3878 5.68367 10.7449 5.68367H12.7347L12.7857 5.55102C13.1122 4.62245 14.0102 4 15 4C15.9898 4 16.8878 4.62245 17.2143 5.55102L17.2653 5.68367H19.2551C19.6122 5.68367 19.898 5.96939 19.898 6.32653V7.37755H23.5C24.3265 7.37755 25 8.04082 25 8.85714V23.4898C25 24.3061 24.3265 24.9694 23.5 24.9694H6.5ZM6.29592 23.6939H23.7143V8.65306H19.898V9.70408C19.898 10.0612 19.6122 10.3469 19.2551 10.3469H10.7449C10.3878 10.3469 10.102 10.0612 10.102 9.70408V8.65306H6.29592V23.6939ZM11.398 9.06122H18.6122V6.96939H16.7041C16.3469 6.96939 16.0612 6.68367 16.0612 6.32653C16.0612 5.7449 15.5918 5.27551 15.0102 5.27551C14.4286 5.27551 13.949 5.7449 13.949 6.32653C13.949 6.68367 13.6633 6.96939 13.3061 6.96939H11.398V9.06122Z"
            fill="#606061"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8 14.75C8 14.3358 8.33579 14 8.75 14H11.25C11.6642 14 12 14.3358 12 14.75C12 15.1642 11.6642 15.5 11.25 15.5H8.75C8.33579 15.5 8 15.1642 8 14.75ZM13 14.75C13 14.3358 13.3358 14 13.75 14H16.25C16.6642 14 17 14.3358 17 14.75C17 15.1642 16.6642 15.5 16.25 15.5H13.75C13.3358 15.5 13 15.1642 13 14.75ZM18.75 14C18.3358 14 18 14.3358 18 14.75C18 15.1642 18.3358 15.5 18.75 15.5H21.25C21.6642 15.5 22 15.1642 22 14.75C22 14.3358 21.6642 14 21.25 14H18.75Z"
            fill="#606061"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M8 19.75C8 19.3358 8.33579 19 8.75 19H11.25C11.6642 19 12 19.3358 12 19.75C12 20.1642 11.6642 20.5 11.25 20.5H8.75C8.33579 20.5 8 20.1642 8 19.75ZM13 19.75C13 19.3358 13.3358 19 13.75 19H16.25C16.6642 19 17 19.3358 17 19.75C17 20.1642 16.6642 20.5 16.25 20.5H13.75C13.3358 20.5 13 20.1642 13 19.75ZM18.75 19C18.3358 19 18 19.3358 18 19.75C18 20.1642 18.3358 20.5 18.75 20.5H21.25C21.6642 20.5 22 20.1642 22 19.75C22 19.3358 21.6642 19 21.25 19H18.75Z"
            fill="#606061"
          />
        </svg>
      </AsideMenuListItem>
      <router-link
        to="/clients?page=1"
      >
        <AsideMenuListItem
          :selected="isPathSelected('clients')"
          title="Контакты"
          @click="selectTab('clients')"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6 23.25V6.75C6 6.02065 6.28095 5.32118 6.78105 4.80546C7.28115 4.28973 7.95942 4 9.66667 4H21.3333C22.0406 4 22.7189 4.28973 23.219 4.80546C23.719 5.32118 24 6.02065 24 6.75V21.875C24 22.2397 23.8595 22.5894 23.6095 22.8473C23.3594 23.1051 23.0203 23.25 22.6667 23.25H7.33333C7.33333 23.6147 7.47381 23.9644 7.72386 24.2223C7.97391 24.4801 8.31304 24.625 9.66667 24.625H23.3333C23.5101 24.625 23.6797 24.6974 23.8047 24.8264C23.9298 24.9553 24 25.1302 24 25.3125C24 25.4948 23.9298 25.6697 23.8047 25.7986C23.6797 25.9276 23.5101 26 23.3333 26H9.66667C7.95942 26 7.28115 25.7103 6.78105 25.1945C6.28095 24.6788 6 23.9793 6 23.25ZM22.2761 5.77773C22.0261 5.51987 21.687 5.375 21.3333 5.375H9.66667C8.31304 5.375 7.97391 5.51987 7.72386 5.77773C7.47381 6.03559 7.33333 6.38533 7.33333 6.75V21.875H22.6667V6.75C22.6667 6.38533 22.5262 6.03559 22.2761 5.77773ZM15.8 11.1429C15.8 11.4186 15.697 11.6678 15.5369 11.8393C15.3795 12.008 15.1844 12.0857 15 12.0857C14.8156 12.0857 14.6205 12.008 14.4631 11.8393C14.303 11.6678 14.2 11.4186 14.2 11.1429C14.2 10.8671 14.303 10.6179 14.4631 10.4464C14.6205 10.2777 14.8156 10.2 15 10.2C15.1844 10.2 15.3795 10.2777 15.5369 10.4464C15.697 10.6179 15.8 10.8671 15.8 11.1429ZM12.2 16.1429V15.9143H17.8V16.1429C17.8 16.608 17.6268 17.0389 17.3417 17.3444C17.0592 17.647 16.6946 17.8 16.3333 17.8H13.6667C13.3054 17.8 12.9408 17.647 12.6583 17.3444C12.3732 17.0389 12.2 16.608 12.2 16.1429ZM17 11.1429C17 11.7112 16.7893 12.2562 16.4142 12.6581C16.0391 13.0599 15.5304 13.2857 15 13.2857C14.4696 13.2857 13.9609 13.0599 13.5858 12.6581C13.2107 12.2562 13 11.7112 13 11.1429C13 10.5745 13.2107 10.0295 13.5858 9.62763C13.9609 9.22576 14.4696 9 15 9C15.5304 9 16.0391 9.22576 16.4142 9.62763C16.7893 10.0295 17 10.5745 17 11.1429ZM11 15.7857V16.1429C11 16.9006 11.281 17.6273 11.781 18.1632C12.2811 18.699 12.9594 19 13.6667 19H16.3333C17.0406 19 17.7189 18.699 18.219 18.1632C18.719 17.6273 19 16.9006 19 16.1429V15.7857C19 15.5016 18.8946 15.229 18.7071 15.0281C18.5196 14.8272 18.2652 14.7143 18 14.7143H12C11.7348 14.7143 11.4804 14.8272 11.2929 15.0281C11.1054 15.229 11 15.5016 11 15.7857Z"
              fill="#606061"
            />
          </svg>
        </AsideMenuListItem>
      </router-link>
      <AsideMenuListItem
        :selected="isPathSelected('settings')"
        title="Настройки"
        @click="changeTab('settings')"
      >
        <svg
          width="30"
          height="30"
          viewBox="0 0 30 30"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15 5.62963C14.725 5.62963 14.4612 5.73889 14.2667 5.93337C14.0722 6.12785 13.963 6.39163 13.963 6.66667V6.82732C13.9611 7.28418 13.8258 7.73054 13.5735 8.11144C13.3213 8.49235 12.9631 8.79118 12.5432 8.97115C12.4708 9.00217 12.3945 9.02247 12.3166 9.03155C11.9319 9.16844 11.5171 9.20273 11.1133 9.12952C10.6528 9.04602 10.2278 8.82645 9.89319 8.49915L9.88677 8.49286L9.83125 8.43727C9.73493 8.34085 9.62024 8.26404 9.49435 8.21185C9.36845 8.15966 9.2335 8.1328 9.09722 8.1328C8.96094 8.1328 8.82599 8.15966 8.7001 8.21185C8.5742 8.26404 8.45983 8.34053 8.36352 8.43695L8.36288 8.43759C8.26646 8.53391 8.18997 8.64828 8.13778 8.77417C8.08559 8.90007 8.05873 9.03501 8.05873 9.1713C8.05873 9.30758 8.08559 9.44253 8.13778 9.56842C8.18997 9.69431 8.26646 9.80869 8.36288 9.905L8.42511 9.96723C8.75241 10.3018 8.97194 10.7269 9.05545 11.1874C9.13743 11.6395 9.0846 12.1056 8.90386 12.5276C8.73996 12.9586 8.45242 13.3318 8.07707 13.6003C7.69474 13.8737 7.23898 14.0258 6.76905 14.0368L6.75 14.037H6.66667C6.39163 14.037 6.12785 14.1463 5.93337 14.3408C5.73889 14.5353 5.62963 14.799 5.62963 15.0741C5.62963 15.3491 5.73889 15.6129 5.93337 15.8074C6.12785 16.0019 6.39163 16.1111 6.66667 16.1111H6.82732C7.28418 16.1129 7.73054 16.2483 8.11144 16.5006C8.49114 16.752 8.78928 17.1087 8.96944 17.5269C9.15701 17.9541 9.21277 18.4275 9.12952 18.8867C9.04602 19.3472 8.82645 19.7722 8.49915 20.1068L8.49286 20.1132L8.43727 20.1688C8.34085 20.2651 8.26404 20.3798 8.21185 20.5057C8.15966 20.6315 8.1328 20.7665 8.1328 20.9028C8.1328 21.0391 8.15966 21.174 8.21185 21.2999C8.26404 21.4258 8.34053 21.5402 8.43695 21.6365L8.43759 21.6371C8.5339 21.7335 8.64828 21.81 8.77417 21.8622C8.90007 21.9144 9.03501 21.9413 9.1713 21.9413C9.30758 21.9413 9.44253 21.9144 9.56842 21.8622C9.69431 21.81 9.80869 21.7335 9.905 21.6371L9.96723 21.5749C10.3018 21.2476 10.7269 21.0281 11.1874 20.9445C11.6395 20.8626 12.1056 20.9154 12.5276 21.0961C12.9586 21.26 13.3318 21.5476 13.6003 21.9229C13.8737 22.3053 14.0258 22.761 14.0368 23.2309L14.037 23.25V23.3333C14.037 23.6084 14.1463 23.8721 14.3408 24.0666C14.5353 24.2611 14.799 24.3704 15.0741 24.3704C15.3491 24.3704 15.6129 24.2611 15.8074 24.0666C16.0019 23.8721 16.1111 23.6084 16.1111 23.3333V23.1759L16.1111 23.1727C16.1129 22.7158 16.2483 22.2695 16.5006 21.8886C16.752 21.5089 17.1086 21.2108 17.5268 21.0306C17.954 20.843 18.4275 20.7872 18.8867 20.8705C19.3472 20.954 19.7722 21.1735 20.1068 21.5009L20.1132 21.5071L20.1688 21.5627C20.2651 21.6591 20.3798 21.736 20.5057 21.7881C20.6315 21.8403 20.7665 21.8672 20.9028 21.8672C21.0391 21.8672 21.174 21.8403 21.2999 21.7881C21.4258 21.736 21.5402 21.6595 21.6365 21.563L21.6371 21.5624C21.7335 21.4661 21.81 21.3517 21.8622 21.2258C21.9144 21.0999 21.9413 20.965 21.9413 20.8287C21.9413 20.6924 21.9144 20.5575 21.8622 20.4316C21.81 20.3057 21.7335 20.1913 21.6371 20.095L21.5749 20.0328C21.2476 19.6982 21.0281 19.2731 20.9445 18.8126C20.8613 18.3535 20.9171 17.88 21.1046 17.4529C21.2847 17.0347 21.5829 16.678 21.9626 16.4265C22.3435 16.1742 22.7899 16.0389 23.2467 16.037L23.25 16.037L23.3333 16.037C23.6084 16.037 23.8721 15.9278 24.0666 15.7333C24.2611 15.5388 24.3704 15.275 24.3704 15C24.3704 14.725 24.2611 14.4612 24.0666 14.2667C23.8721 14.0722 23.6084 13.963 23.3333 13.963H23.1759L23.1727 13.963C22.7158 13.9611 22.2695 13.8258 21.8886 13.5735C21.5077 13.3213 21.2088 12.9631 21.0288 12.5432C20.9978 12.4708 20.9775 12.3945 20.9684 12.3166C20.8316 11.9319 20.7973 11.5171 20.8705 11.1133C20.954 10.6528 21.1735 10.2278 21.5009 9.89319L21.5071 9.88677L21.5627 9.83125C21.6591 9.73494 21.736 9.62024 21.7881 9.49435C21.8403 9.36845 21.8672 9.23351 21.8672 9.09722C21.8672 8.96094 21.8403 8.82599 21.7881 8.7001C21.736 8.57421 21.6595 8.45983 21.563 8.36352L21.5624 8.36288C21.4661 8.26646 21.3517 8.18997 21.2258 8.13778C21.0999 8.08559 20.965 8.05873 20.8287 8.05873C20.6924 8.05873 20.5575 8.08559 20.4316 8.13778C20.3057 8.18997 20.1913 8.26646 20.095 8.36288L20.0328 8.42511C19.6982 8.75241 19.2731 8.97194 18.8126 9.05545C18.3535 9.1387 17.88 9.08293 17.4528 8.89536C17.0346 8.71521 16.6779 8.41707 16.4265 8.03737C16.1742 7.65646 16.0389 7.21011 16.037 6.75325L16.037 6.75V6.66667C16.037 6.39163 15.9278 6.12785 15.7333 5.93337C15.5388 5.73889 15.275 5.62963 15 5.62963ZM13.1144 4.78105C13.6145 4.28095 14.2928 4 15 4C15.7072 4 16.3855 4.28095 16.8856 4.78105C17.3857 5.28115 17.6667 5.95942 17.6667 6.66667V6.74816C17.6675 6.88671 17.7087 7.02203 17.7852 7.13757C17.862 7.2535 17.971 7.34445 18.0988 7.39922L18.1068 7.40266C18.2371 7.46018 18.3817 7.47738 18.5218 7.45197C18.6608 7.42677 18.7891 7.36087 18.8906 7.26267L18.942 7.2112C19.1897 6.96326 19.4838 6.76657 19.8075 6.63237C20.1313 6.49817 20.4783 6.4291 20.8287 6.4291C21.1791 6.4291 21.5261 6.49817 21.8499 6.63237C22.1733 6.76645 22.4672 6.96292 22.7147 7.21056C22.9627 7.45822 23.1594 7.75232 23.2936 8.07605C23.4278 8.39978 23.4968 8.74678 23.4968 9.09722C23.4968 9.44766 23.4278 9.79467 23.2936 10.1184C23.1594 10.4421 22.9627 10.7362 22.7147 10.9839L22.6633 11.0354C22.5651 11.1368 22.4992 11.2651 22.474 11.4041C22.4485 11.5443 22.4657 11.6888 22.5232 11.8192C22.549 11.8776 22.5678 11.9386 22.5792 12.0011C22.6328 12.086 22.704 12.1589 22.7884 12.2148C22.9039 12.2913 23.0392 12.3325 23.1778 12.3333H23.3333C24.0406 12.3333 24.7189 12.6143 25.219 13.1144C25.719 13.6145 26 14.2928 26 15C26 15.7072 25.719 16.3855 25.219 16.8856C24.7189 17.3857 24.0406 17.6667 23.3333 17.6667H23.2518C23.1133 17.6675 22.978 17.7087 22.8624 17.7852C22.7465 17.862 22.6556 17.971 22.6008 18.0988L22.5973 18.1068C22.5398 18.2371 22.5226 18.3817 22.548 18.5218C22.5732 18.6608 22.6391 18.7891 22.7373 18.8906L22.7888 18.942C23.0367 19.1897 23.2334 19.4838 23.3676 19.8075C23.5018 20.1313 23.5709 20.4783 23.5709 20.8287C23.5709 21.1791 23.5018 21.5261 23.3676 21.8499C23.2334 22.1736 23.0367 22.4677 22.7888 22.7154L22.2133 22.1392L22.7894 22.7147C22.5418 22.9627 22.2477 23.1594 21.924 23.2936C21.6002 23.4278 21.2532 23.4968 20.9028 23.4968C20.5523 23.4968 20.2053 23.4278 19.8816 23.2936C19.5579 23.1594 19.2638 22.9627 19.0161 22.7147L18.9647 22.6633C18.8632 22.5651 18.7349 22.4992 18.5959 22.474C18.4557 22.4485 18.3112 22.4657 18.1808 22.5232L18.1729 22.5267C18.0451 22.5815 17.936 22.6724 17.8593 22.7884C17.7827 22.9039 17.7415 23.0393 17.7407 23.1779V23.3333C17.7407 24.0406 17.4598 24.7189 16.9597 25.219C16.4596 25.719 15.7813 26 15.0741 26C14.3668 26 13.6886 25.719 13.1885 25.219C12.6884 24.7189 12.4074 24.0406 12.4074 23.3333V23.2613C12.4026 23.121 12.3565 22.9852 12.2748 22.871C12.1915 22.7546 12.0752 22.666 11.941 22.6166C11.9249 22.6107 11.9089 22.6042 11.8932 22.5973C11.7629 22.5398 11.6183 22.5226 11.4782 22.548C11.3392 22.5732 11.2108 22.6391 11.1094 22.7374L11.058 22.7888C10.8103 23.0367 10.5162 23.2334 10.1925 23.3676C9.86874 23.5018 9.52174 23.5709 9.1713 23.5709C8.82086 23.5709 8.47385 23.5018 8.15012 23.3676C7.8264 23.2334 7.53229 23.0367 7.28463 22.7888C7.03699 22.5413 6.84053 22.2474 6.70644 21.924C6.57225 21.6002 6.50317 21.2532 6.50317 20.9028C6.50317 20.5523 6.57225 20.2053 6.70644 19.8816C6.84064 19.5579 7.03733 19.2638 7.28527 19.0161L7.33674 18.9646C7.43494 18.8632 7.50084 18.7349 7.52604 18.5959C7.55146 18.4557 7.5343 18.3112 7.47678 18.1808L7.47325 18.1729C7.41848 18.0451 7.32757 17.936 7.21164 17.8593C7.09607 17.7827 6.9607 17.7415 6.8221 17.7407H6.66667C5.95942 17.7407 5.28115 17.4598 4.78105 16.9597C4.28095 16.4596 4 15.7813 4 15.0741C4 14.3668 4.28095 13.6886 4.78105 13.1885C5.28115 12.6884 5.95942 12.4074 6.66667 12.4074H6.73866C6.87895 12.4026 7.01477 12.3565 7.12904 12.2748C7.2454 12.1915 7.33403 12.0752 7.38341 11.941C7.38934 11.9249 7.39577 11.9089 7.4027 11.8932C7.46022 11.7629 7.47738 11.6183 7.45197 11.4782C7.42677 11.3392 7.36086 11.2109 7.26266 11.1094L7.2112 11.058C6.96326 10.8103 6.76657 10.5162 6.63237 10.1925C6.49817 9.86874 6.4291 9.52174 6.4291 9.1713C6.4291 8.82086 6.49817 8.47385 6.63237 8.15012C6.76651 7.82653 6.96309 7.53254 7.21088 7.28495C7.45847 7.03716 7.75246 6.84058 8.07605 6.70644C8.39978 6.57225 8.74678 6.50317 9.09722 6.50317C9.44766 6.50317 9.79467 6.57225 10.1184 6.70644C10.4421 6.84064 10.7362 7.03733 10.9839 7.28527L11.0353 7.33673C11.1368 7.43494 11.2651 7.50084 11.4041 7.52604C11.5443 7.55146 11.6888 7.5343 11.8192 7.47678C11.8776 7.451 11.9386 7.43225 12.0011 7.42079C12.086 7.36719 12.1589 7.29603 12.2148 7.21164C12.2913 7.09611 12.3325 6.96078 12.3333 6.82223V6.66667C12.3333 5.95942 12.6143 5.28115 13.1144 4.78105ZM15 12.7593C13.7625 12.7593 12.7593 13.7625 12.7593 15C12.7593 16.2375 13.7625 17.2407 15 17.2407C16.2375 17.2407 17.2407 16.2375 17.2407 15C17.2407 13.7625 16.2375 12.7593 15 12.7593ZM11.1296 15C11.1296 12.8625 12.8625 11.1296 15 11.1296C17.1375 11.1296 18.8704 12.8625 18.8704 15C18.8704 17.1375 17.1375 18.8704 15 18.8704C12.8625 18.8704 11.1296 17.1375 11.1296 15Z"
            fill="#424242"
          />
        </svg>
      </AsideMenuListItem>
      <AsideMenuListButton
        class="px-[12px] my-[16px]"
        title="Добавить задачу"
        @click="shouldShowInspector"
      />
      <EventAlert
        v-if="$store.getters.isLicenseExpired"
        :tarif="user?.tarif"
      />
    </div>
  </aside>
</template>
<script>
import InspectorModalBox from '@/components/Inspector/InspectorModalBox.vue'
import InspectorLimit from '@/components/TasksList/InspectorLimit.vue'
import EventAlert from '@/components/EventAlert.vue'
import AsideMenuListItem from '@/components/AsideMenu/AsideMenuListItem.vue'
import AsideMenuListButton from '@/components/AsideMenu/AsideMenuListButton.vue'

import * as TASK from '@/store/actions/tasks.js'

export default {
  components: {
    InspectorLimit,
    EventAlert,
    InspectorModalBox,
    AsideMenuListItem,
    AsideMenuListButton
  },
  data: () => ({
    showFreeModal: false,
    showInspector: false
  }),
  computed: {
    user () {
      return this.$store.state.user.user
    },
    isAsideMobileExpanded () {
      return this.$store.state.isAsideMobileExpanded
    },
    activeTab () {
      return this.$store.state.navigator.submenu.activeTab
    }
  },
  watch: {
    $route (to, from) {
      this.initActiveTab()
      if (this.isPropertiesMobileExpanded) {
        this.$store.dispatch('asidePropertiesToggle', false)
      }
      if (this.isAsideMobileExpanded) {
        this.$store.dispatch('asideMobileToggle', false)
      }
    }
  },
  mounted () {
    this.initActiveTab()
  },
  methods: {
    initActiveTab () {
      const allPaths = [
        'tasks',
        'account',
        'reglaments',
        'project',
        'board',
        'clients',
        'settings',
        'doitnow'
      ]
      for (let i = 0; i < allPaths.length; i++) {
        if (this.$route.path.includes(allPaths[i])) {
          this.$store.state.navigator.submenu.activeTab = allPaths[i]
          return
        }
      }
    },
    isPathSelected (code) {
      return this.activeTab === code
    },
    shouldShowInspector () {
      if ((this.user.tarif !== 'alpha' && this.user.tarif !== 'trial') || this.$store.getters.isLicenseExpired) {
        this.showFreeModal = true
        return
      }
      this.showInspector = true
    },
    selectTab (tab) {
      this.$store.state.navigator.submenu.activeTab = tab
      this.$store.state.navigator.submenu.status = false
    },
    changeTab (tab) {
      // изменение текущей вкладки
      if (tab === 'tasks') {
        this.$store.dispatch(TASK.DAYS_WITH_TASKS)
      }
      this.selectTab(tab)
      this.$store.state.navigator.submenu.status = true
    }
  }
}
</script>
