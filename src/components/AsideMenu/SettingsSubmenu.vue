<template>
  <div class="px-[16px] pt-[15px]">
    <AsideMenuListSkeleton v-if="status == 'loading'" />
    <template v-if="status == 'success'">
      <router-link to="/settings/account">
        <AsideMenuListItem
          :selected="isAccountSelected"
          title="Аккаунт"
          @click="gotoAccount"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M14.9 25.8C8.89452 25.8 4 20.9055 4 14.9C4 8.89452 8.89452 4 14.9 4C20.9055 4 25.8 8.89452 25.8 14.9C25.8 20.9055 20.9055 25.8 14.9 25.8ZM14.9 20.2976C13.0344 20.2976 11.2422 20.874 9.7225 21.964L9.60721 22.0479L9.7225 22.1317C11.2422 23.2217 13.0344 23.7982 14.9 23.7982C16.7656 23.7982 18.5578 23.2217 20.0775 22.1317L20.1928 22.0479L20.0775 21.964C18.5578 20.874 16.7656 20.2976 14.9 20.2976ZM14.9 18.3062C17.3106 18.3062 19.6897 19.1237 21.5972 20.6225L21.6811 20.6854L21.7439 20.612C23.075 19.0085 23.8191 16.9857 23.8191 14.9105C23.8191 9.995 19.826 6.00183 14.9105 6.00183C9.995 6.00183 6.00183 9.995 6.00183 14.9105C6.00183 16.9962 6.73548 19.0189 8.07702 20.612L8.1399 20.6854L8.22375 20.6225C10.1103 19.1237 12.4894 18.3062 14.9 18.3062ZM14.9 15.8957C12.8353 15.8957 11.1479 14.2188 11.1479 12.154C11.1479 10.0893 12.8353 8.40192 14.9 8.40192C16.9647 8.40192 18.6521 10.0788 18.6521 12.154C18.6521 14.2292 16.9647 15.8957 14.9 15.8957ZM14.9 10.3933C13.9358 10.3933 13.1392 11.1793 13.1392 12.154C13.1392 13.1183 13.9253 13.9043 14.9 13.9043C15.8747 13.9043 16.6503 13.1183 16.6503 12.154C16.6503 11.1793 15.8642 10.3933 14.9 10.3933Z"
              fill="currentColor"
            />
          </svg>
        </AsideMenuListItem>
      </router-link>
      <router-link to="/settings/karma">
        <AsideMenuListItem
          :selected="isKarmaSelected"
          title="Карма"
          @click="gotoKarma"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M23.3205 4C22.6442 3.99971 21.986 4.21896 21.4449 4.62479C20.9038 5.03062 20.5091 5.6011 20.32 6.2505C20.131 6.8999 20.1578 7.59312 20.3964 8.22597C20.6351 8.85881 21.0728 9.3971 21.6436 9.75991L19.6044 16.897C19.5411 16.8929 19.4777 16.8908 19.4143 16.8906C18.7421 16.8899 18.0877 17.1071 17.5494 17.5097L13.7821 14.3703C13.9604 13.8411 13.9937 13.2738 13.8785 12.7274C13.7633 12.181 13.5038 11.6754 13.1269 11.2633C12.7501 10.8512 12.2697 10.5476 11.7358 10.3841C11.2018 10.2206 10.6338 10.2032 10.0909 10.3336C9.54789 10.464 9.04979 10.7376 8.64837 11.1258C8.24695 11.514 7.95689 12.0026 7.80835 12.5409C7.65981 13.0792 7.65823 13.6475 7.80377 14.1866C7.94931 14.7257 8.23665 15.216 8.6359 15.6064L6.42438 20.0297C6.32753 20.0205 6.2303 20.0158 6.13302 20.0156C5.38437 20.0147 4.66019 20.2822 4.09193 20.7696C3.52367 21.2569 3.14899 21.9319 3.03591 22.672C2.92283 23.412 3.07883 24.1681 3.47561 24.803C3.87239 25.4378 4.48364 25.9094 5.19841 26.132C5.91318 26.3547 6.68409 26.3137 7.37121 26.0165C8.05834 25.7193 8.61613 25.1856 8.94333 24.5122C9.27054 23.8388 9.34548 23.0705 9.15454 22.3466C8.9636 21.6227 8.51945 20.9913 7.9027 20.5669L9.99254 16.3877C10.5002 16.5278 11.0351 16.537 11.5472 16.4144C12.0594 16.2918 12.5321 16.0415 12.9213 15.6868L16.5688 18.7264C16.3211 19.2722 16.2356 19.8778 16.3225 20.4709C16.4095 21.0639 16.6651 21.6195 17.059 22.0713C17.4529 22.5231 17.9684 22.8521 18.544 23.0191C19.1197 23.186 19.7313 23.1839 20.3058 23.013C20.8803 22.842 21.3935 22.5095 21.7842 22.0549C22.175 21.6004 22.4268 21.0431 22.5096 20.4494C22.5924 19.8558 22.5027 19.2508 22.2512 18.7067C21.9998 18.1626 21.5971 17.7023 21.0913 17.3807L23.1304 10.2437C23.1933 10.2475 23.2566 10.25 23.3205 10.25C24.1493 10.25 24.9442 9.92076 25.5302 9.33471C26.1163 8.74866 26.4455 7.9538 26.4455 7.125C26.4455 6.2962 26.1163 5.50134 25.5302 4.91529C24.9442 4.32924 24.1493 4 23.3205 4ZM6.13302 24.7031C5.82399 24.7031 5.52189 24.6115 5.26494 24.4398C5.00799 24.2681 4.80772 24.0241 4.68946 23.7386C4.5712 23.4531 4.54025 23.1389 4.60054 22.8358C4.66083 22.5327 4.80965 22.2543 5.02817 22.0358C5.24669 21.8173 5.5251 21.6684 5.82819 21.6081C6.13129 21.5479 6.44545 21.5788 6.73096 21.6971C7.01647 21.8153 7.2605 22.0156 7.43219 22.2725C7.60388 22.5295 7.69552 22.8316 7.69552 23.1406C7.69506 23.5549 7.53029 23.952 7.23736 24.245C6.94444 24.5379 6.54728 24.7027 6.13302 24.7031ZM10.8205 14.9375C10.5115 14.9375 10.2094 14.8459 9.95244 14.6742C9.69549 14.5025 9.49522 14.2585 9.37696 13.9729C9.2587 13.6874 9.22775 13.3733 9.28804 13.0702C9.34833 12.7671 9.49715 12.4887 9.71567 12.2701C9.93419 12.0516 10.2126 11.9028 10.5157 11.8425C10.8188 11.7822 11.133 11.8132 11.4185 11.9314C11.704 12.0497 11.948 12.25 12.1197 12.5069C12.2914 12.7639 12.383 13.066 12.383 13.375C12.3826 13.7893 12.2178 14.1864 11.9249 14.4793C11.6319 14.7723 11.2348 14.937 10.8205 14.9375ZM19.4143 21.5781C19.1052 21.5781 18.8031 21.4865 18.5462 21.3148C18.2892 21.1431 18.089 20.8991 17.9707 20.6136C17.8524 20.3281 17.8215 20.0139 17.8818 19.7108C17.9421 19.4077 18.0909 19.1293 18.3094 18.9108C18.5279 18.6923 18.8063 18.5434 19.1094 18.4831C19.4125 18.4229 19.7267 18.4538 20.0122 18.5721C20.2977 18.6903 20.5418 18.8906 20.7134 19.1475C20.8851 19.4045 20.9768 19.7066 20.9768 20.0156C20.9763 20.4299 20.8115 20.827 20.5186 21.12C20.2257 21.4129 19.8285 21.5777 19.4143 21.5781ZM23.3205 8.6875C23.0115 8.6875 22.7094 8.59586 22.4524 8.42417C22.1955 8.25248 21.9952 8.00845 21.877 7.72294C21.7587 7.43743 21.7278 7.12327 21.788 6.82017C21.8483 6.51708 21.9971 6.23867 22.2157 6.02015C22.4342 5.80163 22.7126 5.65281 23.0157 5.59252C23.3188 5.53223 23.633 5.56318 23.9185 5.68144C24.204 5.7997 24.448 5.99997 24.6197 6.25692C24.7914 6.51387 24.883 6.81597 24.883 7.125C24.8826 7.53926 24.7178 7.93642 24.4249 8.22934C24.1319 8.52227 23.7348 8.68704 23.3205 8.6875Z"
              fill="currentColor"
            />
          </svg>
        </AsideMenuListItem>
      </router-link>
    </template>
  </div>
</template>

<script>
import AsideMenuListSkeleton from '@/components/AsideMenu/AsideMenuListSkeleton.vue'
import AsideMenuListItem from '@/components/AsideMenu/AsideMenuListItem.vue'

export default {
  components: {
    AsideMenuListSkeleton,
    AsideMenuListItem
  },
  props: {
    menu: {
      type: Array,
      default: () => []
    }
  },
  computed: {
    status () {
      return this.$store.state.navigator.status
    },
    isAccountSelected () {
      return this.$store.state.navigator.currentSettingsTab === 'account'
    },
    isKarmaSelected () {
      return this.$store.state.navigator.currentSettingsTab === 'karma'
    }
  },
  methods: {
    gotoSettingsTab (type, label, uid) {
      this.$store.state.navigator.currentSettingsTab = type
      localStorage.setItem('currentSettingsTab', type)
      localStorage.setItem('lastTab', 'settings')
      // закрываем сабменю и меняем роут
      this.$store.state.navigator.submenu.status = false
    },
    gotoAccount () {
      this.gotoSettingsTab('account', 'Аккаунт', '9d3ba501-c173-462d-9b5f-0db97c06a026')
    },
    gotoKarma () {
      this.gotoSettingsTab('karma', 'Карма', '5cda53e7-f859-4bac-b76c-4ad330a65a9a')
    }
  }
}
</script>
