<template>
  <div class="px-[20px] pt-[22px]">
    <AsideMenuListSkeleton v-if="status == 'loading'" />
    <div
      v-if="status == 'success'"
      class="flex flex-col gap-[6px]"
    >
      <router-link
        v-slot="{ isActive }"
        to="/settings/employees"
      >
        <SubmenuListItem
          :selected="isActive"
          title="Сотрудники"
          @click="closeMenu"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M14.9998 6.54762C14.5894 6.54762 14.1957 6.71067 13.9055 7.00091C13.6153 7.29114 13.4522 7.68478 13.4522 8.09524C13.4522 8.50569 13.6153 8.89933 13.9055 9.18957C14.1957 9.4798 14.5894 9.64286 14.9998 9.64286C15.4103 9.64286 15.8039 9.4798 16.0942 9.18957C16.3844 8.89933 16.5475 8.50569 16.5475 8.09524C16.5475 7.68478 16.3844 7.29114 16.0942 7.00091C15.8039 6.71067 15.4103 6.54762 14.9998 6.54762ZM11.9046 8.09524C11.9046 7.27433 12.2307 6.48704 12.8112 5.90657C13.3916 5.3261 14.1789 5 14.9998 5C15.8207 5 16.608 5.3261 17.1885 5.90657C17.769 6.48704 18.0951 7.27433 18.0951 8.09524C18.0951 8.91615 17.769 9.70343 17.1885 10.2839C16.608 10.8644 15.8207 11.1905 14.9998 11.1905C14.1789 11.1905 13.3916 10.8644 12.8112 10.2839C12.2307 9.70343 11.9046 8.91615 11.9046 8.09524ZM22.351 7.32143C22.0432 7.32143 21.748 7.44372 21.5303 7.66139C21.3126 7.87907 21.1903 8.1743 21.1903 8.48214C21.1903 8.78998 21.3126 9.08522 21.5303 9.30289C21.748 9.52057 22.0432 9.64286 22.351 9.64286C22.6589 9.64286 22.9541 9.52057 23.1718 9.30289C23.3895 9.08522 23.5117 8.78998 23.5117 8.48214C23.5117 8.1743 23.3895 7.87907 23.1718 7.66139C22.9541 7.44372 22.6589 7.32143 22.351 7.32143ZM19.6427 8.48214C19.6427 8.12648 19.7127 7.7743 19.8489 7.44571C19.985 7.11712 20.1845 6.81855 20.4359 6.56706C20.6874 6.31557 20.986 6.11608 21.3146 5.97997C21.6432 5.84386 21.9954 5.77381 22.351 5.77381C22.7067 5.77381 23.0589 5.84386 23.3875 5.97997C23.7161 6.11608 24.0146 6.31557 24.2661 6.56706C24.5176 6.81855 24.7171 7.11712 24.8532 7.44571C24.9893 7.7743 25.0594 8.12648 25.0594 8.48214C25.0594 9.20044 24.774 9.88931 24.2661 10.3972C23.7582 10.9051 23.0693 11.1905 22.351 11.1905C21.6327 11.1905 20.9439 10.9051 20.4359 10.3972C19.928 9.88931 19.6427 9.20044 19.6427 8.48214ZM6.48793 8.48214C6.48793 8.1743 6.61022 7.87907 6.8279 7.66139C7.04557 7.44372 7.34081 7.32143 7.64865 7.32143C7.95649 7.32143 8.25172 7.44372 8.4694 7.66139C8.68707 7.87907 8.80936 8.1743 8.80936 8.48214C8.80936 8.78998 8.68707 9.08522 8.4694 9.30289C8.25172 9.52057 7.95649 9.64286 7.64865 9.64286C7.34081 9.64286 7.04557 9.52057 6.8279 9.30289C6.61022 9.08522 6.48793 8.78998 6.48793 8.48214ZM7.64865 5.77381C6.93035 5.77381 6.24148 6.05915 5.73357 6.56706C5.22566 7.07497 4.94031 7.76385 4.94031 8.48214C4.94031 9.20044 5.22566 9.88931 5.73357 10.3972C6.24148 10.9051 6.93035 11.1905 7.64865 11.1905C8.36694 11.1905 9.05582 10.9051 9.56373 10.3972C10.0716 9.88931 10.357 9.20044 10.357 8.48214C10.357 7.76385 10.0716 7.07497 9.56373 6.56706C9.05582 6.05915 8.36694 5.77381 7.64865 5.77381ZM9.31311 21.6408C8.96314 21.8714 8.55724 22.0031 8.1385 22.0217C7.71975 22.0402 7.30379 21.9451 6.93475 21.7463C6.56572 21.5476 6.25738 21.2526 6.04247 20.8927C5.82756 20.5329 5.7141 20.1215 5.71412 19.7024V14.6726C5.71412 14.57 5.75489 14.4716 5.82745 14.399C5.9 14.3265 5.99841 14.2857 6.10103 14.2857H9.22025C9.29083 13.7191 9.51748 13.1833 9.8749 12.7381H6.10103C5.58796 12.7381 5.09591 12.9419 4.73311 13.3047C4.37032 13.6675 4.1665 14.1596 4.1665 14.6726V19.7024C4.1663 20.3687 4.33818 21.0237 4.66549 21.6041C4.99279 22.1845 5.46443 22.6705 6.03472 23.0151C6.60501 23.3596 7.25461 23.5511 7.92062 23.5709C8.58663 23.5907 9.24646 23.4381 9.83621 23.128C9.59452 22.6586 9.41851 22.1582 9.31311 21.6408ZM20.1635 23.128C20.7532 23.4381 21.413 23.5907 22.0791 23.5709C22.7451 23.5511 23.3947 23.3596 23.965 23.0151C24.5352 22.6705 25.0069 22.1845 25.3342 21.6041C25.6615 21.0237 25.8334 20.3687 25.8332 19.7024V14.6726C25.8332 14.1596 25.6294 13.6675 25.2666 13.3047C24.9038 12.9419 24.4117 12.7381 23.8986 12.7381H20.1248C20.4819 13.1835 20.7085 13.7192 20.7794 14.2857H23.8986C24.0013 14.2857 24.0997 14.3265 24.1722 14.399C24.2448 14.4716 24.2856 14.57 24.2856 14.6726V19.7024C24.2856 20.1215 24.1721 20.5329 23.9572 20.8927C23.7423 21.2526 23.434 21.5476 23.0649 21.7463C22.6959 21.9451 22.2799 22.0402 21.8612 22.0217C21.4424 22.0031 21.0365 21.8714 20.6866 21.6408C20.5812 22.1581 20.4051 22.6586 20.1635 23.128ZM12.2915 12.7381C11.7784 12.7381 11.2864 12.9419 10.9236 13.3047C10.5608 13.6675 10.357 14.1596 10.357 14.6726V20.4762C10.357 21.7076 10.8461 22.8885 11.7168 23.7592C12.5875 24.6299 13.7685 25.119 14.9998 25.119C16.2312 25.119 17.4121 24.6299 18.2828 23.7592C19.1535 22.8885 19.6427 21.7076 19.6427 20.4762V14.6726C19.6427 14.1596 19.4389 13.6675 19.0761 13.3047C18.7133 12.9419 18.2212 12.7381 17.7082 12.7381H12.2915ZM11.9046 14.6726C11.9046 14.57 11.9454 14.4716 12.0179 14.399C12.0905 14.3265 12.1889 14.2857 12.2915 14.2857H17.7082C17.8108 14.2857 17.9092 14.3265 17.9818 14.399C18.0543 14.4716 18.0951 14.57 18.0951 14.6726V20.4762C18.0951 21.2971 17.769 22.0844 17.1885 22.6649C16.608 23.2453 15.8207 23.5714 14.9998 23.5714C14.1789 23.5714 13.3916 23.2453 12.8112 22.6649C12.2307 22.0844 11.9046 21.2971 11.9046 20.4762V14.6726Z"
              fill="currentColor"
            />
          </svg>
        </SubmenuListItem>
      </router-link>
      <router-link
        v-slot="{ isActive }"
        to="/settings/tags"
      >
        <SubmenuListItem
          :selected="isActive"
          title="Метки"
          @click="closeMenu"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M15.1314 7.738C15.2871 7.57548 15.5025 7.48358 15.7276 7.48358L21.6895 7.48358C22.1456 7.48358 22.5153 7.8533 22.5153 8.30936V14.2713C22.5153 14.4964 22.4234 14.7118 22.2609 14.8675L14.8658 21.9545C14.5414 22.2653 14.0281 22.2598 13.7105 21.9422L8.05667 16.2884C7.73902 15.9707 7.73356 15.4574 8.04438 15.1331L15.1314 7.738ZM14.1828 6.34086L6.29265 14.574C5.67101 15.2227 5.68193 16.2493 6.31723 16.8846L13.1143 23.6816C13.7496 24.3169 14.7762 24.3278 15.4248 23.7062L23.658 15.8161C23.983 15.5046 24.1668 15.0739 24.1668 14.6237V7.48358C24.1668 6.57146 23.4274 5.83203 22.5153 5.83203H15.3752C14.925 5.83203 14.4943 6.01582 14.1828 6.34086ZM17.0535 11.0566C17.3059 10.8042 17.6406 10.6652 17.9979 10.6652C18.3553 10.6652 18.6899 10.8042 18.9424 11.0566C19.1948 11.309 19.3337 11.6437 19.3337 12.001C19.3337 12.3584 19.1948 12.693 18.9424 12.9455C18.6899 13.1979 18.3553 13.3368 17.9979 13.3368C17.6406 13.3368 17.3059 13.1979 17.0535 12.9455C16.8011 12.693 16.6621 12.3584 16.6621 12.001C16.6621 11.6437 16.8011 11.309 17.0535 11.0566Z"
              fill="currentColor"
            />
          </svg>
        </SubmenuListItem>
      </router-link>
      <router-link
        v-slot="{ isActive }"
        to="/settings/colors"
      >
        <SubmenuListItem
          :selected="isActive"
          title="Цвета"
          @click="closeMenu"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M24.6092 11.9041L23.6149 10.9103C23.278 10.5735 22.8029 10.452 22.3666 10.5569C22.4715 10.1153 22.35 9.64044 22.013 9.30918L19.8533 7.15045C19.6544 6.95169 19.4003 6.82471 19.1352 6.78054C19.091 6.51553 18.964 6.26156 18.7651 6.0628L18.0912 5.38923C17.572 4.87026 16.7324 4.87026 16.2187 5.38923L9.43554 12.1691C8.91631 12.6881 8.91631 13.5273 9.43554 14.0407L10.8828 15.4872C11.0208 15.6253 11.0816 15.8075 11.065 16.0007C11.0429 16.1884 10.938 16.3596 10.7778 16.4645C6.46931 19.2084 6.06608 19.6115 5.89484 19.7826C4.70172 20.9752 4.70172 22.913 5.89484 24.1056C7.08796 25.2981 9.02679 25.2981 10.2199 24.1056C10.3911 23.9344 10.7944 23.5314 13.5397 19.225C13.6446 19.0649 13.8103 18.96 14.0037 18.9379C14.197 18.9158 14.3848 18.9821 14.5174 19.1146L15.9646 20.5611C16.4838 21.0801 17.3234 21.0801 17.8371 20.5611L24.6202 13.7812C25.1284 13.2567 25.1284 12.4175 24.6092 11.9041ZM16.8926 19.617L15.4453 18.1705C15.0255 17.7509 14.44 17.5466 13.849 17.6128C13.258 17.6791 12.7332 18.0048 12.4128 18.5017C11.1976 20.412 9.66202 22.764 9.26983 23.156C8.59594 23.8295 7.49672 23.8295 6.82283 23.156C6.14893 22.4824 6.14893 21.3837 6.82283 20.7101C7.21501 20.3182 9.57364 18.7888 11.4793 17.5687C11.9765 17.2484 12.3079 16.7239 12.3742 16.1332C12.4404 15.5424 12.2305 14.9572 11.8163 14.5376L10.3691 13.0911L11.4241 12.0366L17.9421 18.5514L16.8926 19.617ZM18.8811 17.6294L12.3631 11.1146L17.1522 6.32781L17.8316 7.00138L17.0748 8.67978C17.0472 8.73499 17.0638 8.80676 17.108 8.85093C17.1522 8.8951 17.224 8.90614 17.2792 8.87854L18.9198 8.08903L21.0795 10.2478L19.0181 13.7328C18.9794 13.7935 18.9849 13.8708 19.0346 13.9205C19.0844 13.9702 19.1672 13.9812 19.228 13.9371L22.6814 11.8433L23.6757 12.8371L18.8811 17.6294Z"
              fill="currentColor"
            />
            <path
              d="M9.03784 21.7315C9.03784 22.1622 8.68984 22.51 8.25899 22.51C7.82814 22.51 7.48015 22.1622 7.48015 21.7315C7.48015 21.3009 7.82814 20.9531 8.25899 20.9531C8.68984 20.9531 9.03784 21.3009 9.03784 21.7315Z"
              fill="currentColor"
            />
          </svg>
        </SubmenuListItem>
      </router-link>
      <router-link
        v-slot="{ isActive }"
        to="/settings/options"
      >
        <SubmenuListItem
          :selected="isActive"
          title="Основные"
          @click="closeMenu"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M8.07985 25.0013H13.7945V23.5726H8.07985V6.42866H19.5091V13.572H20.9378V6.42866C20.9374 6.04987 20.7868 5.68671 20.5189 5.41886C20.2511 5.15102 19.8879 5.00038 19.5091 5H8.07985C7.70106 5.00038 7.33789 5.15102 7.07005 5.41886C6.8022 5.68671 6.65156 6.04987 6.65118 6.42866V23.5726C6.65156 23.9514 6.8022 24.3145 7.07005 24.5824C7.33789 24.8502 7.70106 25.0009 8.07985 25.0013ZM13.7945 13.5734H9.50848V15.002H13.7945V13.5734ZM18.0805 7.85871H9.50848V9.28737H18.0805V7.85871ZM18.0805 10.716H9.50848V12.1447H18.0805V10.716ZM13.7945 20.7167H9.50848V22.1453H13.7945V20.7167ZM23.7229 19.288H25.2238V20.7167H23.7229C23.6308 21.1638 23.4533 21.589 23.2001 21.9689L24.2644 23.0332L23.2543 24.0433L22.19 22.9789C21.8101 23.2322 21.3849 23.4097 20.9378 23.5018V25.0026H19.5091V23.5018C19.062 23.4097 18.6368 23.2322 18.2569 22.9789L17.1925 24.0433L16.1825 23.0332L17.2468 21.9689C16.9936 21.589 16.8161 21.1638 16.7239 20.7167H15.2231V19.288H16.7239C16.8161 18.8408 16.9936 18.4157 17.2468 18.0358L16.1825 16.9714L17.1925 15.9614L18.2569 17.0257C18.6368 16.7725 19.062 16.5949 19.5091 16.5028V15.002H20.9378V16.5028C21.3849 16.5949 21.8101 16.7725 22.19 17.0257L23.2543 15.9614L24.2644 16.9714L23.2001 18.0358C23.4533 18.4157 23.6308 18.8408 23.7229 19.288ZM19.0329 21.7842C19.3853 22.0196 19.7996 22.1453 20.2234 22.1453C20.7916 22.1448 21.3364 21.9188 21.7381 21.517C22.1399 21.1153 22.3659 20.5705 22.3664 20.0023C22.3664 19.5785 22.2407 19.1642 22.0053 18.8117C21.7698 18.4593 21.4351 18.1847 21.0435 18.0225C20.6519 17.8603 20.2211 17.8178 19.8054 17.9005C19.3897 17.9832 19.0078 18.1873 18.7081 18.487C18.4084 18.7867 18.2043 19.1685 18.1216 19.5842C18.0389 19.9999 18.0814 20.4308 18.2436 20.8224C18.4058 21.214 18.6804 21.5487 19.0329 21.7842Z"
              fill="currentColor"
            />
          </svg>
        </SubmenuListItem>
      </router-link>
      <router-link
        v-slot="{ isActive }"
        to="/settings/tarif"
      >
        <SubmenuListItem
          :selected="isActive"
          title="Тариф"
          @click="closeMenu"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M17 17.5C18.5913 17.5 20.1174 16.8415 21.2426 15.6694C22.3679 14.4973 23 12.9076 23 11.25C23 9.5924 22.3679 8.00268 21.2426 6.83058C20.1174 5.65848 18.5913 5 17 5H11C10.7878 5 10.5843 5.0878 10.4343 5.24408C10.2843 5.40036 10.2 5.61232 10.2 5.83333V15.8333H7.8C7.58783 15.8333 7.38434 15.9211 7.23431 16.0774C7.08429 16.2337 7 16.4457 7 16.6667C7 16.8877 7.08429 17.0996 7.23431 17.2559C7.38434 17.4122 7.58783 17.5 7.8 17.5H10.2V19.1667H7.8C7.58783 19.1667 7.38434 19.2545 7.23431 19.4107C7.08429 19.567 7 19.779 7 20C7 20.221 7.08429 20.433 7.23431 20.5893C7.38434 20.7455 7.58783 20.8333 7.8 20.8333H10.2V24.1667C10.2 24.3877 10.2843 24.5996 10.4343 24.7559C10.5843 24.9122 10.7878 25 11 25C11.2122 25 11.4157 24.9122 11.5657 24.7559C11.7157 24.5996 11.8 24.3877 11.8 24.1667V20.8333H16.6C16.8122 20.8333 17.0157 20.7455 17.1657 20.5893C17.3157 20.433 17.4 20.221 17.4 20C17.4 19.779 17.3157 19.567 17.1657 19.4107C17.0157 19.2545 16.8122 19.1667 16.6 19.1667H11.8V17.5H17ZM11.8 6.66667H17C18.167 6.66667 19.2861 7.14955 20.1113 8.00909C20.9364 8.86864 21.4 10.0344 21.4 11.25C21.4 12.4656 20.9364 13.6314 20.1113 14.4909C19.2861 15.3504 18.167 15.8333 17 15.8333H11.8V6.66667Z"
              fill="currentColor"
            />
          </svg>
        </SubmenuListItem>
      </router-link>
      <router-link
        v-slot="{ isActive }"
        to="/settings/help"
      >
        <SubmenuListItem
          :selected="isActive"
          title="Помощь"
          @click="closeMenu"
        >
          <svg
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15 4C8.92491 4 4 8.92491 4 15C4 21.0751 8.92491 26 15 26C21.0751 26 26 21.0751 26 15C26 8.92491 21.0751 4 15 4ZM17.75 5.78269C20.8486 6.70634 23.2854 9.15144 24.2104 12.25H19.751C19.2685 11.4214 18.579 10.7325 17.75 10.2507V5.78269ZM19.1171 15.0045C19.1171 17.2804 17.2739 19.1253 15 19.1253C12.7261 19.1253 10.8829 17.2804 10.8829 15.0045C10.8829 12.7285 12.7265 10.8833 15 10.8833C17.2736 10.8833 19.1171 12.7285 19.1171 15.0045ZM13.625 5.48088C14.0743 5.41659 14.5329 5.38153 15 5.38153C15.4668 5.38153 15.9257 5.41659 16.375 5.48088V9.68769C15.935 9.57391 15.4758 9.50722 15 9.50722C14.5243 9.50722 14.0654 9.57391 13.625 9.68769V5.48088ZM12.25 5.78269V10.2508C11.4216 10.7317 10.7306 11.4226 10.2491 12.25H5.78958C6.71427 9.15144 9.15146 6.70637 12.25 5.78269ZM5.38155 15.0034C5.38155 14.5345 5.42141 14.076 5.4864 13.625H9.68427C9.57015 14.0656 9.50724 14.5269 9.50724 15.0037C9.50724 15.4778 9.5698 15.9367 9.68255 16.375H5.48537C5.42145 15.9264 5.38155 15.4695 5.38155 15.0034ZM12.25 24.2238C9.14903 23.2998 6.71118 20.8513 5.78752 17.75H10.2449C10.7269 18.5805 11.4192 19.2742 12.25 19.7564V24.2238V24.2238ZM16.375 24.5256C15.9257 24.5899 15.4668 24.6249 15 24.6249C14.5329 24.6249 14.0743 24.5895 13.625 24.5256V20.3195C14.0654 20.4332 14.5243 20.4999 15 20.4999C15.4758 20.4999 15.935 20.4332 16.375 20.3195V24.5256ZM17.75 24.2238V19.7564C18.5805 19.2741 19.2732 18.5805 19.7548 17.75H24.2122C23.2885 20.8509 20.8507 23.2998 17.75 24.2238L17.75 24.2238ZM20.3175 16.375C20.4302 15.9367 20.4928 15.4778 20.4928 15.0037C20.4928 14.5269 20.4299 14.0656 20.3154 13.6249H24.5136C24.5783 14.0759 24.6185 14.5345 24.6185 15.0034C24.6185 15.4695 24.579 15.9267 24.5147 16.375H20.3175Z"
              fill="currentColor"
            />
          </svg>
        </SubmenuListItem>
      </router-link>
    </div>
  </div>
</template>

<script>
import AsideMenuListSkeleton from '@/components/AsideMenu/AsideMenuListSkeleton.vue'
import SubmenuListItem from '@/components/AsideMenu/SubmenuListItem.vue'

export default {
  components: {
    AsideMenuListSkeleton,
    SubmenuListItem
  },
  props: {
    menu: {
      type: Array,
      default: () => []
    }
  },
  computed: {
    status () {
      return this.$store.state.navigator.status
    },
    isAsideMobileExpanded () {
      return this.$store.state.isAsideMobileExpanded
    },
    isPropertiesMobileExpanded () {
      return this.$store.state.isPropertiesMobileExpanded
    },
    storeNavigator () {
      return this.$store.getters.sortedNavigator
    }
  },
  methods: {
    // Выношу логику по скрытию меню из selectSubMenuItem
    closeMenu () {
      this.$store.state.navigator.submenu.status = false

      if (this.isPropertiesMobileExpanded) {
        this.$store.dispatch('asidePropertiesToggle', false)
      }
      if (this.isAsideMobileExpanded) {
        this.$store.dispatch('asideMobileToggle', false)
      }
    }
  }
}
</script>
